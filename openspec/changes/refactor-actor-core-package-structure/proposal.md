## Why
現在の `modules/actor-core/src` は約107個のモジュールファイルがフラットに配置されており、以下の問題が発生している：
- モジュール間の関係性が不明瞭で、新規開発者の理解が困難
- 内部実装の詳細（`actor_ref_impl.rs` 等）が公開APIと同列に配置され、カプセル化が不十分
- 機能ごとの境界が曖昧で、保守性とテスタビリティが低下
- 参照実装（Pekko/ProtoActor-Go）との構造的乖離により、設計意図の把握が難しい

階層的なパッケージ構造に移行することで、コードベースの可読性・保守性を向上させ、将来的な機能拡張への対応を容易にする。

## What Changes
- `modules/actor-core/src` のフラットな構造を、14個の論理的なパッケージに階層化する
- 主要な変更点：
  1. **`actor_prim/` パッケージ**: アクタープリミティブを集約し、Rust 2018 のモジュール規約（mod.rs禁止）に従う
  2. **`*_internal.rs` 分割**: 内部実装の詳細は `actor_ref_internal.rs` のような別ファイルに切り出し `pub(crate)` で可視性制御
  3. **`eventstream/` パッケージ**: トップレベル化（Pekko/ProtoActorに倣う）
  4. **`dispatcher/` パッケージ**: トップレベル化（Pekko: `org.apache.pekko.dispatch`、Akka: `akka.dispatch` と同様に独立パッケージとして配置）
  5. **`props_` + `spawn_` ファイル群**: アクター生成の設定と実行を分離
  6. **`error/` パッケージ**: エラー型を集約
  7. その他の機能別パッケージ: `messaging/`, `mailbox/`, `supervision/`, `system/`, `lifecycle/`, `deadletter/`, `logging/`, `futures/`
- `pub(crate)` と `*_internal.rs` を活用した可視性制御の強化
- `prelude` モジュールによる便利な再エクスポート機能の追加（ユーザー向けに限定）
- crate ルートおよび中間モジュールの再エクスポートを撤廃し、階層パスへの移行を強制

## Impact
- **既存コードへの影響**: 旧来のフラットなインポートパスは廃止され、利用者は新しい階層パスまたは `prelude` を用いるよう更新が必要
- **新規開発**: より明確なパッケージ構造により、コードの配置場所が自明になる
- **保守性**: 機能ごとの境界が明確になり、変更の影響範囲が限定される
- **ドキュメント**: パッケージレベルのドキュメントにより、APIの理解が容易になる
- **内部実装の隠蔽**: `*_internal.rs` と `pub(crate)` により、外部に公開すべきでない実装詳細を保護

## Scope
### Goals
1. 参照実装（Pekko/ProtoActor-Go）に倣った命名規則とパッケージ構造の採用
2. 内部実装の詳細を `*_internal.rs` へ切り出し、APIの境界を明確化
3. 各パッケージの責務を明確にし、依存関係を整理
4. crate ルートからの再エクスポートを撤廃し、Module Wiring ガイドラインに沿った階層 API を確立
5. `prelude.rs` による利用者向けの再エクスポート機能の提供（内部コードは FQCN を使用）
6. 各パッケージのドキュメント充実化

### Non-Goals
- 旧来のフラットなインポートパスを維持すること
- 互換レイヤーやリネームによる暫定的な橋渡し
- パフォーマンスチューニング
- 新機能の追加（挙動変更を伴う機能拡張は別提案で扱う）

## Rollout Plan
### フェーズ1: ディレクトリ構造の作成と再エクスポート撤廃（破壊的変更を含む）
1. 新しいパッケージディレクトリの作成
2. 既存ファイルを適切なパッケージへ移動
3. 各パッケージのルートファイル（`<name>.rs`）を用意し、`pub mod` 宣言のみで子モジュールを公開
4. 内部実装を `*_internal.rs` へ移動し、`pub(crate)` で制限
5. `lib.rs` から既存APIのフラットな再エクスポートを削除し、新しい階層パス宣言と `prelude` のみを残す
6. テストファイルの対応するパッケージへの移動

### フェーズ2: ビルドとテストの検証
1. `cargo build --all-features` によるビルド検証
2. `cargo test` による全テスト実行
3. `cargo clippy` による静的解析チェック
4. `cargo doc --no-deps` によるドキュメント生成確認

### フェーズ3: ドキュメントとPreludeの整備
1. 各パッケージのモジュールレベルドキュメント追加
2. 使用例の追加
3. `prelude.rs` の作成（よく使う型の集約）
4. マイグレーションガイドの作成（新旧インポートパスの対応表）

## Risks & Mitigations
- **リスク**: ファイル移動によるテスト破損
  - **緩和策**: 各移動後に段階的にビルド・テストを実行し、問題を早期発見
- **リスク**: ビルド時間の増加
  - **緩和策**: パッケージ分割により並列ビルドの最適化が期待できる
- **リスク**: 内部実装の可視性変更による意図しないAPI変更
  - **緩和策**: 対象箇所の単体テストを整備し、`prelude` での公開範囲を明確化
- **リスク**: マージコンフリクトの発生
  - **緩和策**: 早期に実施し、他の変更との依存を最小化

## Impacted APIs / Modules
- `modules/actor-core/src` 全体（約107ファイル）
- すべての内部モジュール構造
- `lib.rs` の再エクスポート宣言
- パッケージのドキュメント構造

**注**: 公開APIの機能は維持するが、インポートパスは新しい階層構造へ更新する必要がある。

## References
- [Pekko Actor](https://github.com/apache/pekko) - `actor/` ディレクトリ構造、`dungeon/` による内部実装の隠蔽
- [ProtoActor-Go](https://github.com/asynkron/protoactor-go) - フラット構造からトップレベルパッケージへの整理
- Rust API Guidelines - モジュール構成とpreludeパターン
