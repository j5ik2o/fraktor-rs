# リファクタリング計画指示

## やらないこと (Do Not)

- `cargo check` / `cargo build` / `cargo test` など、ビルドを伴うコマンドを実行しないこと。このムーブメントはビルド権限がなく `Operation not permitted` で失敗する。

## やること (Do)

1. GitHub Issue またはタスク記述から、対象のリファクタリング要件を抽出する
2. Issue に Phase 定義がある場合、**タスク指示で指定された Phase のみ** を対象とする
3. 対象 Phase の影響範囲を分析する:
   - 変更対象の型・ファイル一覧
   - 依存関係（このPhaseの変更が影響する他のファイル）
   - テスト影響（変更により修正が必要なテスト）
4. 実装手順を具体的なステップに分解する
5. リスク評価を行う

## Phase 管理の原則

- 1回の実行で **1つの Phase** のみ対応する
- Phase の実行順序は Issue の定義に従う（A → B → C → D）
- 前の Phase が完了していない場合は ABORT する
- Phase 内のステップは依存順に実行する（リーフノードから内側へ）

## 必須出力

1. 対象 Phase の概要
2. 具体的な変更ファイル一覧（推定行数の変化を含む）
3. 実装手順（ステップバイステップ）
4. テスト戦略（新規テスト、既存テスト修正）
5. リスク評価
